.. _EBL:

EBL Models
==========

Supported Models
----------------

Currently there is 3 models supported :

 * Franceschini, A., Rodighiero, G., & Vaccari, M.2008, A&A, 487, 837 . http://adsabs.harvard.edu/abs/2008A%26A...487..837F
 * Finke, Razzaque, & Dermer, 2010, ApJ, 712, 238 . http://adsabs.harvard.edu/abs/2009arXiv0905.1115F
 * Dominguez, A., Primack, J.R., Rosario, D. J., et al. 2011, MNRAS, 410, 2556 . http://adsabs.harvard.edu/abs/2011MNRAS.410.2556D


Each model is read using a reader class that can be called with the redshift of the source :

.. code-block:: python

    readerFinke = FinkeReader(0.117)
    readerDominguez = DominguezReader(0.117)
    readerFranceschini = FranceschiniReader(0.117)


To get the value of the optical depth, the function GetTau() can be used and it return the energy and tau value arrays


Flux correction 
---------------

For correction of the flux, use the module EBLCorrection

.. code-block:: python

    import numpy
    from EBL.ReadFinke2010_EBL import *
    from EBL.EBLCorrection import *
    
    reader = FinkeReader(0.117)
    
    ener = numpy.arange(0.1,10,0.1)
    flux = numpy.ones(len(ener))
    FluxCorrected,_ = EBLCorrection(reader,ener,flux, None,alpha = 1.,unit = "TeV")

None is used here for the error on the flux but you can give this value too.

alpha is a correction factor applied to the EBL model in the formula phi_corrected = 
phi_uncorrected * Exp(-alpha*tau) . The value alpha = 1 means absorption and alpha = -1 means 
deabsorption; unit can be MeV, GeV or TeV


.. figure::  _static/EBL_correction_Ex.png
   :align:   center

   Exemple of flux in A.U. corrected with the supported models. This plot has been generated by the 
   script ExempleEBL.py
